---
title: MBR / GPT について
date: 2021-03-05
tags: ['MBR', 'GPT']
---

# MBR / GPT について
ディスクパーティショニング方式のMBRとGPTについて学習したため、そのまとめとしてここに整理する。

---

## **MBR**

### 正式名称
- Master Boot Record

### 位置指定方法
- CHS (Cylinder Header Sector)
  - ディスク内の位置を指定する際に、シリンダ・ヘッダ・セクタを指定する方式

### 基本構成
- MBRセクター (1セクタ目)
  - 名称の由来
  - ブートローダー (446バイト)、パーティションテーブル (64バイト)、ブートシグネチャ (2バイト, 0xaa55)を含む
- パーティション (2セクタ目以降)
  - プライマリパーティション
  　- 最大4つまで作成可能
  　　- パーティションテーブルが64バイト、パーティション情報が16バイトのため
  　　- 4つ以上作成する場合は、拡張パーティションに論理パーティションを作成する必要あり
  - 拡張パーティション

### 対応BIOS
- UEFI非対応BIOS (レガシーBIOS)

---

## **GPT**

### 正式名称
- GUID Partition Table

### 位置指定方法
- LBA (Logical Block Addressing)
  - 装置の最初のセクタから何番目かを示す数値によって指定する

### 基本構成
- MBR (LBA0)
  - MBR方式の1セクタ目と同様
  - 従来のMBR方式のみに対応したツールを使用した場合の事故防止のために配置 (「パーティションの破壊」や「中身がないと判定されること」を避けるため)
- パーティションテーブルヘッダー (LBA1)
  - ユーザーが使用可能なディスク内の範囲、パーティションエントリ数、パーティションのサイズを定義している
  - ディスクのGUIDを含んでいる
  - 自身のCRC32チェックサムを含んでおり、専用のユーティリティ以外で変更した場合には不整合を起こすように設計されており、不整合を起こすとEFIが第2GPTをコピーして復元を試みる。第2GPTでも不整合を起こした場合、アクセス不可となる
- パーティンションエントリ (LBA2 ~ 33)
  - 各エントリの先頭にエントリ内のデータタイプに応じたGUIDが書き込まれている
- パーティション (LBA34以降)
  - MBR方式と違い、無制限にパーティションを作成可能 (そのため、拡張パーティションや論理パーティションを持たない)
- バックアップパーティションエントリ (ディスクの最後)
  - プライマリヘッダーとパーティションエントリーが自動的にバックアップされる
  - チェックサムが不整合を起こした場合、ここが参照される
  
### 対応BIOS
- UEFI対応BIOS (UEFI BIOS)
